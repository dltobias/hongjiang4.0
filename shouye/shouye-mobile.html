<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>çƒ˜åŒ  BakeManager - é¦–é¡µ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* Cookpad é£æ ¼é…è‰² - ç»Ÿä¸€é…è‰² */
        :root {
            --primary-orange: #ff9f43;
            --primary-dark: #ff8c00;
            --text-main: #333333;
            --text-sub: #8b8b8b;
            --bg-light: #f7f7f5;
        }

        /* ç»Ÿä¸€å›¾æ ‡æ ·å¼ - ç°ä»£æŸ”å’Œé£æ ¼ (Soft Tint) */
        .icon-base {
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }
        
        .icon-unified {
            width: 2.75rem; /* 44px */
            height: 2.75rem;
            border-radius: 12px; /* æ›´åœ†æ¶¦çš„åœ†è§’ (Squircleé£æ ¼) */
            margin: 0 auto 0.5rem auto;
        }
        
        .icon-unified-lg {
            width: 3.25rem; /* 52px */
            height: 3.25rem;
            border-radius: 16px;
        }

        /* è¯­ä¹‰åŒ–é…è‰²æ–¹æ¡ˆ */
        .icon-blue { background-color: #eff6ff; color: #2563eb; }
        .icon-green { background-color: #ecfdf5; color: #059669; }
        .icon-purple { background-color: #f5f3ff; color: #7c3aed; }
        .icon-orange { background-color: #fff7ed; color: #ea580c; }
        .icon-red { background-color: #fef2f2; color: #dc2626; }
        .icon-cyan { background-color: #ecfeff; color: #0891b2; }
        .icon-indigo { background-color: #eef2ff; color: #4f46e5; }

        .gradient-primary {
            background: linear-gradient(135deg, #ff9f43 0%, #ff8c00 100%);
        }
        .gradient-recipe {
            background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
        }
        .gradient-message {
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
        }
        .gradient-inventory {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }
        .gradient-order {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }
        .card {
            transition: all 0.3s ease;
        }
        .card:hover {
            transform: translateY(-2px);
        }
        .feature-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .bottom-nav { 
            background: rgba(255, 255, 255, 0.98); 
            backdrop-filter: blur(10px); 
            border-top: 1px solid #f0f0f0; 
            padding-bottom: env(safe-area-inset-bottom); 
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            z-index: 50;
        }
        .bottom-nav-item { 
            padding: 8px 0 4px; 
            color: #999; 
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .bottom-nav-item.active { color: #ff8c00; }
        .bottom-nav-item i { font-size: 22px; margin-bottom: 2px; }
        .bottom-nav-item span { font-size: 10px; font-weight: 500; }
        .main-content {
            padding-bottom: 80px;
        }
        .weather-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .message-badge {
            position: absolute;
            top: -4px;
            right: -4px;
            background: #ef4444;
            color: white;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            font-size: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- é¡¶éƒ¨çŠ¶æ€æ  -->
    <div class="bg-white px-4 py-3 flex items-center justify-between">
        <div class="flex items-center space-x-3">
            <div class="w-8 h-8 rounded-lg gradient-primary flex items-center justify-center">
                <i class="fas fa-bread-slice text-white text-sm"></i>
            </div>
            <div>
                <div class="text-sm font-semibold text-gray-800">çƒ˜åŒ  BakeManager</div>
                <div class="text-xs text-gray-500">æ™ºèƒ½çƒ˜ç„™ç®¡ç†å¹³å°</div>
            </div>
        </div>
        <div class="flex items-center space-x-3">
            <div class="w-8 h-8 rounded-full bg-gray-300 flex items-center justify-center">
                <i class="fas fa-user text-gray-600 text-sm"></i>
            </div>
        </div>
    </div>

    <!-- ä¸»å†…å®¹åŒºåŸŸ -->
    <main class="main-content">


        <!-- æœç´¢æ  -->
        <div class="px-4 mt-4">
            <div class="relative">
                <input type="text" placeholder="æœç´¢é…æ–¹ã€åŸæ–™æˆ–ç¤¾åŒºå†…å®¹..." class="w-full bg-white rounded-xl px-4 py-3 pl-10 text-sm border border-gray-200 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent">
                <i class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                <button class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-orange-500">
                    <i class="fas fa-microphone"></i>
                </button>
            </div>
        </div>

        <!-- ç¤¾åŒºä¼˜è´¨é…æ–¹è½®æ’­å›¾ -->
        <div class="px-4 mt-6">
            <div class="flex items-center justify-between mb-4">
                <h2 class="text-lg font-semibold text-gray-800">ç¤¾åŒºä¼˜è´¨é…æ–¹</h2>
                <a href="#" class="text-sm text-orange-600">æ›´å¤šæ¨è</a>
            </div>
            <div class="relative overflow-hidden rounded-xl">
                <div class="recipe-carousel flex transition-transform duration-500 ease-in-out" id="recipeCarousel">
                    <!-- è½®æ’­é¡¹1 -->
                    <div class="w-full flex-shrink-0 relative">
                        <div class="relative rounded-xl overflow-hidden h-48">
                            <!-- äº§å“å›¾ç‰‡ä½œä¸ºèƒŒæ™¯ -->
                            <img src="https://images.unsplash.com/photo-1563729784474-d77dbb933a9e?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80" alt="æ³•å¼é©¬å¡é¾™" class="w-full h-full object-cover">
                            <!-- æ¸å˜é®ç½© -->
                            <div class="absolute inset-0 bg-gradient-to-t from-black/70 via-black/30 to-transparent"></div>
                            <!-- å†…å®¹åŒºåŸŸ -->
                            <div class="absolute bottom-0 left-0 right-0 p-6 text-white">
                                <div class="flex items-center space-x-2 mb-2">
                                    <div class="w-8 h-8 rounded-full bg-white bg-opacity-20 flex items-center justify-center">
                                        <i class="fas fa-crown text-yellow-300 text-sm"></i>
                                    </div>
                                    <span class="text-sm font-medium">æœ¬å‘¨çƒ­é—¨</span>
                                </div>
                                <h3 class="text-xl font-bold mb-2">æ³•å¼é©¬å¡é¾™</h3>
                                <p class="text-sm text-gray-200 mb-3">ç²¾è‡´æ³•å¼ç”œç‚¹ï¼Œå£æ„Ÿå±‚æ¬¡ä¸°å¯Œ</p>
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center space-x-4">
                                        <span class="text-xs">â­ 4.9</span>
                                        <span class="text-xs">ğŸ‘¥ 1.2k</span>
                                        <span class="text-xs">â±ï¸ 120åˆ†é’Ÿ</span>
                                    </div>
                                    <button class="bg-white bg-opacity-20 px-4 py-2 rounded-full text-sm font-medium hover:bg-opacity-30 transition-all">æŸ¥çœ‹è¯¦æƒ…</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- è½®æ’­é¡¹2 -->
                    <div class="w-full flex-shrink-0 relative">
                        <div class="relative rounded-xl overflow-hidden h-48">
                            <!-- äº§å“å›¾ç‰‡ä½œä¸ºèƒŒæ™¯ -->
                            <img src="https://images.unsplash.com/photo-1578985545062-69928b1d9587?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80" alt="ææ‹‰ç±³è‹" class="w-full h-full object-cover">
                            <!-- æ¸å˜é®ç½© -->
                            <div class="absolute inset-0 bg-gradient-to-t from-black/70 via-black/30 to-transparent"></div>
                            <!-- å†…å®¹åŒºåŸŸ -->
                            <div class="absolute bottom-0 left-0 right-0 p-6 text-white">
                                <div class="flex items-center space-x-2 mb-2">
                                    <div class="w-8 h-8 rounded-full bg-white bg-opacity-20 flex items-center justify-center">
                                        <i class="fas fa-star text-yellow-300 text-sm"></i>
                                    </div>
                                    <span class="text-sm font-medium">ç²¾é€‰æ¨è</span>
                                </div>
                                <h3 class="text-xl font-bold mb-2">ç»å…¸ææ‹‰ç±³è‹</h3>
                                <p class="text-sm text-gray-200 mb-3">æ„å¼ç»å…¸ç”œå“ï¼Œæµ“éƒå’–å•¡é¦™</p>
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center space-x-4">
                                        <span class="text-xs">â­ 4.8</span>
                                        <span class="text-xs">ğŸ‘¥ 856</span>
                                        <span class="text-xs">â±ï¸ 90åˆ†é’Ÿ</span>
                                    </div>
                                    <button class="bg-white bg-opacity-20 px-4 py-2 rounded-full text-sm font-medium hover:bg-opacity-30 transition-all">æŸ¥çœ‹è¯¦æƒ…</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- è½®æ’­é¡¹3 -->
                    <div class="w-full flex-shrink-0 relative">
                        <div class="relative rounded-xl overflow-hidden h-48">
                            <!-- äº§å“å›¾ç‰‡ä½œä¸ºèƒŒæ™¯ -->
                            <img src="https://images.unsplash.com/photo-1571115764595-644a1f56a55c?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80" alt="èŠå£«è›‹ç³•" class="w-full h-full object-cover">
                            <!-- æ¸å˜é®ç½© -->
                            <div class="absolute inset-0 bg-gradient-to-t from-black/70 via-black/30 to-transparent"></div>
                            <!-- å†…å®¹åŒºåŸŸ -->
                            <div class="absolute bottom-0 left-0 right-0 p-6 text-white">
                                <div class="flex items-center space-x-2 mb-2">
                                    <div class="w-8 h-8 rounded-full bg-white bg-opacity-20 flex items-center justify-center">
                                        <i class="fas fa-heart text-red-300 text-sm"></i>
                                    </div>
                                    <span class="text-sm font-medium">ç”¨æˆ·å–œçˆ±</span>
                                </div>
                                <h3 class="text-xl font-bold mb-2">å…çƒ¤èŠå£«è›‹ç³•</h3>
                                <p class="text-sm text-gray-200 mb-3">å…çƒ¤åˆ¶ä½œï¼Œæ–°æ‰‹å‹å¥½</p>
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center space-x-4">
                                        <span class="text-xs">â­ 4.7</span>
                                        <span class="text-xs">ğŸ‘¥ 642</span>
                                        <span class="text-xs">â±ï¸ 60åˆ†é’Ÿ</span>
                                    </div>
                                    <button class="bg-white bg-opacity-20 px-4 py-2 rounded-full text-sm font-medium hover:bg-opacity-30 transition-all">æŸ¥çœ‹è¯¦æƒ…</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- è½®æ’­æŒ‡ç¤ºå™¨ -->
                <div class="flex justify-center space-x-2 mt-4">
                    <button class="recipe-dot w-2 h-2 rounded-full bg-blue-600 transition-all duration-300" data-index="0"></button>
                    <button class="recipe-dot w-2 h-2 rounded-full bg-gray-300 transition-all duration-300" data-index="1"></button>
                    <button class="recipe-dot w-2 h-2 rounded-full bg-gray-300 transition-all duration-300" data-index="2"></button>
                </div>
            </div>
        </div>

        <!-- å¸¸ç”¨åŠŸèƒ½ -->
        <div class="px-4 mt-6">
            <div class="flex items-center justify-between mb-4">
                <h2 class="text-lg font-semibold text-gray-800">å¸¸ç”¨åŠŸèƒ½</h2>
                <button class="text-sm text-orange-600" onclick="openSettings()">
                    <i class="fas fa-cog text-xs mr-1"></i>è®¾ç½®
                </button>
            </div>
            <div class="grid grid-cols-4 gap-4" id="functionsGrid">
                <!-- é…æ–¹ç®¡ç† (å›ºå®š) -->
                <a href="../../peifnagmokuai/mianbao/mianbaozhuye/peifang-zhuye.html" class="card bg-white rounded-xl p-4 text-center" data-fixed="true">
                    <div class="icon-base icon-unified icon-orange">
                        <i class="fas fa-book text-lg"></i>
                    </div>
                    <div class="text-xs text-gray-700 font-medium">é…æ–¹ç®¡ç†</div>
                </a>
                
                <!-- æ¶ˆæ¯ä¸­å¿ƒ (å›ºå®š) -->
                <a href="#" class="card bg-white rounded-xl p-4 text-center relative" data-fixed="true">
                    <div class="icon-base icon-unified icon-blue">
                        <i class="fas fa-envelope text-lg"></i>
                    </div>
                    <div class="text-xs text-gray-700 font-medium">æ¶ˆæ¯ä¸­å¿ƒ</div>
                    <span class="message-badge" style="top: 8px; right: 8px;">3</span>
                </a>
                
                <!-- åº“å­˜æŸ¥çœ‹ (å¯åˆ é™¤) -->
                <a href="../cangku-gongneng/kucun/kucunchaxunzhuye.html" class="card bg-white rounded-xl p-4 text-center" data-removable="true">
                    <div class="icon-base icon-unified icon-blue">
                        <i class="fas fa-boxes text-lg"></i>
                    </div>
                    <div class="text-xs text-gray-700 font-medium">åº“å­˜æŸ¥çœ‹</div>
                </a>
                
                <!-- å¿«é€Ÿå…¥åº“ (å¯åˆ é™¤) -->
                <a href="../cangku-gongneng/ruku/rukuye-zhuye.html" class="card bg-white rounded-xl p-4 text-center" data-removable="true">
                    <div class="icon-base icon-unified icon-green">
                        <i class="fas fa-plus-circle text-lg"></i>
                    </div>
                    <div class="text-xs text-gray-700 font-medium">å¿«é€Ÿå…¥åº“</div>
                </a>
                
                <!-- è¦è´§ç”³è¯· (å¯åˆ é™¤) -->
                <a href="../yunying/yaohuo/yaohuo-zhuye.html" class="card bg-white rounded-xl p-4 text-center" data-removable="true">
                    <div class="icon-base icon-unified icon-blue">
                        <i class="fas fa-clipboard-list text-lg"></i>
                    </div>
                    <div class="text-xs text-gray-700 font-medium">è¦è´§ç”³è¯·</div>
                </a>
                
                <!-- ç”Ÿäº§é…æ–™ (å¯åˆ é™¤) -->
                <a href="../yunying/shengchan/shengchan-zhuye.html" class="card bg-white rounded-xl p-4 text-center" data-removable="true">
                    <div class="icon-base icon-unified icon-orange">
                        <i class="fas fa-cogs text-lg"></i>
                    </div>
                    <div class="text-xs text-gray-700 font-medium">ç”Ÿäº§é…æ–™</div>
                </a>
            </div>
        </div>

        <div class="px-4 mt-6">
            <div class="grid grid-cols-2 gap-3">
                <div class="recipe-card pb-2">
                    <div class="relative h-32">
                        <img src="https://images.unsplash.com/photo-1560180474-e8563fd75bab?ixlib=rb-1.2.1&auto=format&fit=crop&w=600&q=80" class="w-full h-full object-cover">
                    </div>
                    <div class="p-2.5">
                        <h3 class="font-bold text-gray-800 text-sm mb-2 leading-snug">è‰è“çº¸æ¯è›‹ç³•</h3>
                        <div class="flex items-center justify-between mb-3">
                            <div class="flex items-center space-x-1.5 overflow-hidden">
                                <img src="https://images.unsplash.com/photo-1494790108377-be9c29b29330?ixlib=rb-1.2.1&auto=format&fit=crop&w=100&q=80" class="w-5 h-5 rounded-full">
                                <span class="text-xs text-gray-500 truncate">èæ‹‰</span>
                            </div>
                            <button class="text-xs text-orange-500 bg-orange-50 px-2.5 py-1 rounded-full font-medium flex-shrink-0" onclick="toggleFollow(this)">å…³æ³¨</button>
                        </div>
                        <div class="flex items-center justify-between border-t border-gray-100 pt-2">
                            <div class="flex items-center">
                                <span class="text-[10px] text-orange-500 font-medium">ğŸ”¥ è¿‘æœŸçƒ­é—¨</span>
                            </div>
                            <button class="text-gray-400 active:text-red-500">
                                <i class="far fa-heart text-sm"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <div class="recipe-card pb-2">
                    <div class="relative h-48">
                        <img src="https://images.unsplash.com/photo-1582716401301-b2407dc7563d?ixlib=rb-1.2.1&auto=format&fit=crop&w=600&q=80" class="w-full h-full object-cover">
                        <div class="absolute bottom-2 left-2 bg-orange-500 text-white text-[10px] px-1.5 py-0.5 rounded">å®˜æ–¹ç²¾é€‰</div>
                    </div>
                    <div class="p-2.5">
                        <h3 class="font-bold text-gray-800 text-sm mb-2 leading-snug">ç»å…¸è½¯æ›²å¥‡</h3>
                        <div class="flex items-center justify-between mb-3">
                            <div class="flex items-center space-x-1.5 overflow-hidden">
                                <img src="https://images.unsplash.com/photo-1500648767791-00dcc994a43e?ixlib=rb-1.2.1&auto=format&fit=crop&w=100&q=80" class="w-5 h-5 rounded-full">
                                <span class="text-xs text-gray-500 truncate">æ°å…‹</span>
                            </div>
                            <button class="text-xs text-orange-500 bg-orange-50 px-2.5 py-1 rounded-full font-medium flex-shrink-0" onclick="toggleFollow(this)">å…³æ³¨</button>
                        </div>
                        <div class="flex items-center justify-between border-t border-gray-100 pt-2">
                            <div class="flex items-center">
                                <div class="face-pile">
                                    <img src="https://randomuser.me/api/portraits/men/12.jpg">
                                    <img src="https://randomuser.me/api/portraits/women/14.jpg">
                                </div>
                                <span class="text-[10px] text-gray-400 ml-1.5">200+è·Ÿåš</span>
                            </div>
                            <button class="text-gray-400 active:text-red-500">
                                <i class="far fa-heart text-sm"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="py-8 text-center">
                <button class="text-gray-400 text-xs flex items-center justify-center w-full space-x-1">
                    <span>åŠ è½½æ›´å¤šç¾å‘³</span>
                    <i class="fas fa-chevron-down"></i>
                </button>
            </div>
        </div>

        <!-- æ¶ˆæ¯é€šçŸ¥ -->
        <div class="px-4 mt-6">
            <div class="flex items-center justify-between mb-4">
                <h2 class="text-lg font-semibold text-gray-800">æ¶ˆæ¯é€šçŸ¥</h2>
                <a href="#" class="text-sm text-orange-600">æŸ¥çœ‹å…¨éƒ¨</a>
            </div>
            <div class="bg-white rounded-xl p-4">
                <div class="space-y-3">
                    <div class="flex items-start space-x-3 p-3 bg-red-50 rounded-lg">
                        <div class="w-8 h-8 rounded-full bg-red-500 flex items-center justify-center flex-shrink-0">
                            <i class="fas fa-exclamation text-white text-xs"></i>
                        </div>
                        <div class="flex-1">
                            <div class="text-sm font-medium text-gray-800">åº“å­˜é¢„è­¦</div>
                            <div class="text-xs text-gray-600 mt-1">é«˜ç­‹é¢ç²‰åº“å­˜ä¸è¶³ï¼Œå½“å‰åº“å­˜ä»…å‰©15kg</div>
                            <div class="text-xs text-gray-400 mt-1">2å°æ—¶å‰</div>
                        </div>
                    </div>
                    
                    <div class="flex items-start space-x-3 p-3 bg-blue-50 rounded-lg">
                        <div class="w-8 h-8 rounded-full bg-blue-500 flex items-center justify-center flex-shrink-0">
                            <i class="fas fa-info text-white text-xs"></i>
                        </div>
                        <div class="flex-1">
                            <div class="text-sm font-medium text-gray-800">ç³»ç»Ÿé€šçŸ¥</div>
                            <div class="text-xs text-gray-600 mt-1">ç³»ç»Ÿå°†äºä»Šæ™š23:00-01:00è¿›è¡Œç»´æŠ¤å‡çº§</div>
                            <div class="text-xs text-gray-400 mt-1">1å¤©å‰</div>
                        </div>
                    </div>
                    
                    <div class="flex items-start space-x-3 p-3 bg-green-50 rounded-lg">
                        <div class="w-8 h-8 rounded-full bg-green-500 flex items-center justify-center flex-shrink-0">
                            <i class="fas fa-check text-white text-xs"></i>
                        </div>
                        <div class="flex-1">
                            <div class="text-sm font-medium text-gray-800">è®¢å•å®Œæˆ</div>
                            <div class="text-xs text-gray-600 mt-1">è®¢å•#2023110801å·²å®Œæˆåˆ¶ä½œï¼Œå¯å®‰æ’é…é€</div>
                            <div class="text-xs text-gray-400 mt-1">3å¤©å‰</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ä»Šæ—¥ä»»åŠ¡ -->
        <div class="px-4 mt-6">
            <div class="flex items-center justify-between mb-4">
                <h2 class="text-lg font-semibold text-gray-800">ä»Šæ—¥ä»»åŠ¡</h2>
                <button class="text-sm text-orange-600" onclick="addNewTask()">
                    <i class="fas fa-plus text-xs mr-1"></i>æ–°å¢ä»»åŠ¡
                </button>
            </div>
            <div class="space-y-3">
                <div class="bg-white rounded-xl p-4">
                    <div class="flex items-center justify-between mb-2">
                        <div class="flex items-center space-x-3">
                            <input type="checkbox" class="w-4 h-4 text-orange-600 rounded focus:ring-orange-500">
                            <span class="text-sm font-medium text-gray-800">åˆ¶ä½œæ³•å¼é¢åŒ… x20</span>
                        </div>
                        <span class="text-xs text-orange-600 bg-orange-100 px-2 py-1 rounded-full">è¿›è¡Œä¸­</span>
                    </div>
                    <p class="text-xs text-gray-500 ml-7">é¢„è®¡å®Œæˆæ—¶é—´: 14:30</p>
                    <div class="ml-7 mt-2">
                        <div class="w-full bg-gray-200 rounded-full h-2">
                            <div class="bg-orange-600 h-2 rounded-full" style="width: 65%;"></div>
                        </div>
                        <span class="text-xs text-gray-500 mt-1">65% å®Œæˆ</span>
                    </div>
                </div>
                <div class="bg-white rounded-xl p-4">
                    <div class="flex items-center justify-between mb-2">
                        <div class="flex items-center space-x-3">
                            <input type="checkbox" class="w-4 h-4 text-orange-600 rounded focus:ring-orange-500">
                            <span class="text-sm font-medium text-gray-800">æ£€æŸ¥åº“å­˜çŠ¶æ€</span>
                        </div>
                        <span class="text-xs text-gray-600 bg-gray-100 px-2 py-1 rounded-full">å¾…å¼€å§‹</span>
                    </div>
                    <p class="text-xs text-gray-500 ml-7">é¢„è®¡å®Œæˆæ—¶é—´: 16:00</p>
                </div>
                <div class="bg-white rounded-xl p-4">
                    <div class="flex items-center justify-between mb-2">
                        <div class="flex items-center space-x-3">
                            <input type="checkbox" checked class="w-4 h-4 text-orange-600 rounded focus:ring-orange-500">
                            <span class="text-sm font-medium text-gray-400 line-through">æ¸…æ´çƒ˜ç„™è®¾å¤‡</span>
                        </div>
                        <span class="text-xs text-green-600 bg-green-100 px-2 py-1 rounded-full">å·²å®Œæˆ</span>
                    </div>
                    <p class="text-xs text-gray-400 ml-7">å®Œæˆæ—¶é—´: 09:30</p>
                </div>
            </div>
        </div>

        <!-- æ•°æ®æ¦‚è§ˆ -->
        <div class="px-4 mt-6">
            <div class="flex items-center justify-between mb-4">
                <h2 class="text-lg font-semibold text-gray-800">ä»Šæ—¥æ¦‚è§ˆ</h2>
                <div class="flex items-center space-x-2">
                    <!-- æ•°æ®å¯¼å‡ºæŒ‰é’® -->
                    <button onclick="exportData('overview')" class="text-xs text-gray-500 hover:text-orange-600 transition-colors duration-200 flex items-center space-x-1">
                        <i class="fas fa-download text-xs"></i>
                        <span>å¯¼å‡º</span>
                    </button>
                    <a href="../cangku-gongneng/erp-zhuye-canku.html" class="text-xs text-orange-600 hover:text-orange-800 transition-colors duration-200 flex items-center space-x-1">
                        <span>æŸ¥çœ‹è¯¦ç»†æŠ¥è¡¨</span>
                        <i class="fas fa-chevron-right text-xs"></i>
                    </a>
                </div>
            </div>
            
            <!-- æ·»åŠ æ•°æ®æ›´æ–°æ—¶é—´ -->
            <div class="text-xs text-gray-500 mb-3 flex items-center">
                <i class="fas fa-sync-alt mr-1"></i>
                <span>æ•°æ®æ›´æ–°äº 5åˆ†é’Ÿå‰</span>
            </div>
            <!-- éª¨æ¶å± -->
            <div id="overviewSkeleton" class="grid grid-cols-2 gap-3 hidden">
                <div class="bg-white rounded-xl p-4 shadow-sm animate-pulse">
                    <div class="h-3 bg-gray-200 rounded mb-2"></div>
                    <div class="h-6 bg-gray-200 rounded mb-1"></div>
                    <div class="h-3 bg-gray-200 rounded w-1/2"></div>
                </div>
                <div class="bg-white rounded-xl p-4 shadow-sm animate-pulse">
                    <div class="h-3 bg-gray-200 rounded mb-2"></div>
                    <div class="h-6 bg-gray-200 rounded mb-1"></div>
                    <div class="h-3 bg-gray-200 rounded w-1/2"></div>
                </div>
                <div class="bg-white rounded-xl p-4 shadow-sm animate-pulse">
                    <div class="h-3 bg-gray-200 rounded mb-2"></div>
                    <div class="h-6 bg-gray-200 rounded mb-1"></div>
                    <div class="h-3 bg-gray-200 rounded w-1/2"></div>
                </div>
                <div class="bg-white rounded-xl p-4 shadow-sm animate-pulse">
                    <div class="h-3 bg-gray-200 rounded mb-2"></div>
                    <div class="h-6 bg-gray-200 rounded mb-1"></div>
                    <div class="h-3 bg-gray-200 rounded w-1/2"></div>
                </div>
            </div>
            
            <div id="overviewData" class="grid grid-cols-2 gap-3">
                <!-- é”€å”®æ•°æ® -->
                <div class="bg-white rounded-xl p-4 cursor-pointer hover:shadow-lg transition-all duration-200 transform hover:scale-105" onclick="window.location.href='#sales-detail'">
                    <div class="flex items-center justify-between mb-2">
                        <span class="text-xs text-gray-500">ä»Šæ—¥é”€å”®</span>
                        <i class="fas fa-chart-line text-green-500 text-xs"></i>
                    </div>
                    <div class="text-xl font-bold text-gray-800">Â¥12,580</div>
                    <div class="text-xs text-green-500 mt-1">â†‘ 15% è¾ƒæ˜¨æ—¥</div>
                </div>
                
                <!-- è®¢å•æ•°æ® -->
                <div class="bg-white rounded-xl p-4 cursor-pointer hover:shadow-lg transition-all duration-200 transform hover:scale-105" onclick="window.location.href='#orders-detail'">
                    <div class="flex items-center justify-between mb-2">
                        <span class="text-xs text-gray-500">å®Œæˆè®¢å•</span>
                        <i class="fas fa-shopping-cart text-blue-500 text-xs"></i>
                    </div>
                    <div class="text-xl font-bold text-gray-800">68/75</div>
                    <div class="text-xs text-gray-500 mt-1">å®Œæˆç‡ 91%</div>
                </div>
                
                <!-- åº“å­˜é¢„è­¦ -->
                <div class="bg-white rounded-xl p-4 cursor-pointer hover:shadow-lg transition-all duration-200 transform hover:scale-105" onclick="window.location.href='kucunyujingye-mobile.html'">
                    <div class="flex items-center justify-between mb-2">
                        <span class="text-xs text-gray-500">åº“å­˜é¢„è­¦</span>
                        <i class="fas fa-exclamation-triangle text-orange-500 text-xs"></i>
                    </div>
                    <div class="text-xl font-bold text-orange-600">5</div>
                    <div class="text-xs text-gray-500 mt-1">ç§åŸæ–™éœ€è¡¥è´§</div>
                </div>
                
                <!-- è¿‡æœŸæé†’ -->
                <div class="bg-white rounded-xl p-4 cursor-pointer hover:shadow-lg transition-all duration-200 transform hover:scale-105" onclick="window.location.href='#expiry-detail'">
                    <div class="flex items-center justify-between mb-2">
                        <span class="text-xs text-gray-500">å³å°†è¿‡æœŸ</span>
                        <i class="fas fa-clock text-red-500 text-xs"></i>
                    </div>
                    <div class="text-xl font-bold text-red-600">3</div>
                    <div class="text-xs text-gray-500 mt-1">é¡¹åŸæ–™3æ—¥å†…è¿‡æœŸ</div>
                </div>
            </div>
            
            <!-- æ•°æ®å¼‚å¸¸æç¤º -->
            <div id="dataError" class="hidden bg-red-50 border border-red-200 rounded-lg p-3 mt-3">
                <div class="flex items-center">
                    <i class="fas fa-exclamation-circle text-red-500 mr-2"></i>
                    <span class="text-sm text-red-700">æ•°æ®åŠ è½½å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•</span>
                    <button class="ml-auto text-red-600 hover:text-red-800" onclick="retryLoadData()">
                        <i class="fas fa-redo text-sm"></i>
                    </button>
                </div>
            </div>
        </div>



        <!-- æ•°æ®è¶‹åŠ¿ -->
        <div class="px-4 mt-6">
            <div class="flex items-center justify-between mb-4">
                <h2 class="text-lg font-semibold text-gray-800">ä¸šåŠ¡è¶‹åŠ¿</h2>
                <div class="flex items-center space-x-2">
                    <!-- æ·»åŠ åˆ·æ–°æŒ‰é’® -->
                    <button class="text-gray-500 hover:text-orange-600 transition-colors" onclick="refreshTrendData()">
                        <i class="fas fa-sync-alt text-sm"></i>
                    </button>
                    <select class="text-sm border rounded px-2 py-1 focus:outline-none focus:ring-1 focus:ring-orange-500">
                        <option>è¿‘7å¤©</option>
                        <option>è¿‘30å¤©</option>
                        <option>æœ¬æœˆ</option>
                    </select>
                </div>
            </div>
            
            <!-- ä½¿ç”¨æ ‡ç­¾é¡µåˆ‡æ¢ä¸åŒç»´åº¦çš„æ•°æ® -->
            <div class="flex space-x-4 mb-4 border-b">
                <button id="salesTab" class="trend-tab pb-2 text-sm font-medium text-orange-600 border-b-2 border-orange-600" data-tab="sales">é”€å”®</button>
                <button id="inventoryTab" class="trend-tab pb-2 text-sm font-medium text-gray-500" data-tab="inventory">åº“å­˜</button>
                <button id="productionTab" class="trend-tab pb-2 text-sm font-medium text-gray-500" data-tab="production">ç”Ÿäº§</button>
            </div>
            
            <!-- é”€å”®è¶‹åŠ¿å†…å®¹ -->
            <div id="salesContent" class="trend-content bg-white rounded-xl p-4">
                <!-- æ·»åŠ åŒæ¯”ç¯æ¯”æ•°æ® -->
                <div class="flex justify-around mb-4 p-3 bg-blue-50 rounded-lg">
                    <div class="text-center">
                        <div class="text-xs text-gray-600">åŒæ¯”ä¸Šæœˆ</div>
                        <div class="text-sm font-bold text-green-600">+23.5%</div>
                    </div>
                    <div class="text-center">
                        <div class="text-xs text-gray-600">ç¯æ¯”ä¸Šå‘¨</div>
                        <div class="text-sm font-bold text-green-600">+12.3%</div>
                    </div>
                    <div class="text-center">
                        <div class="text-xs text-gray-600">ç›®æ ‡å®Œæˆç‡</div>
                        <div class="text-sm font-bold text-blue-600">87.2%</div>
                    </div>
                </div>
                <div class="mb-4">
                    <h3 class="text-sm font-medium text-gray-800 mb-2">é”€å”®é¢è¶‹åŠ¿</h3>
                    <div class="h-40 bg-gradient-to-br from-blue-50 to-indigo-100 rounded-lg p-4 relative overflow-hidden">
                        <!-- é”€å”®é¢è¶‹åŠ¿å›¾è¡¨ -->
                        <svg class="w-full h-full" viewBox="0 0 300 120" xmlns="http://www.w3.org/2000/svg">
                            <!-- ç½‘æ ¼çº¿ -->
                            <defs>
                                <pattern id="grid" width="30" height="24" patternUnits="userSpaceOnUse">
                                    <path d="M 30 0 L 0 0 0 24" fill="none" stroke="#e5e7eb" stroke-width="0.5" opacity="0.5"/>
                                </pattern>
                                <linearGradient id="areaGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                                    <stop offset="0%" style="stop-color:#3b82f6;stop-opacity:0.3" />
                                    <stop offset="100%" style="stop-color:#3b82f6;stop-opacity:0.05" />
                                </linearGradient>
                            </defs>
                            
                            <!-- èƒŒæ™¯ç½‘æ ¼ -->
                            <rect width="100%" height="100%" fill="url(#grid)" />
                            
                            <!-- æ•°æ®ç‚¹ -->
                            <g>
                                <!-- é¢ç§¯å¡«å…… -->
                                <path d="M 20 80 L 50 65 L 80 70 L 110 55 L 140 45 L 170 50 L 200 35 L 230 40 L 260 25 L 280 30 L 280 100 L 20 100 Z" 
                                      fill="url(#areaGradient)" />
                                
                                <!-- ä¸»çº¿æ¡ -->
                                <path d="M 20 80 L 50 65 L 80 70 L 110 55 L 140 45 L 170 50 L 200 35 L 230 40 L 260 25 L 280 30" 
                                      fill="none" stroke="#3b82f6" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
                                
                                <!-- æ•°æ®ç‚¹åœ†åœˆ -->
                                <circle cx="20" cy="80" r="3" fill="#3b82f6" stroke="white" stroke-width="2"/>
                                <circle cx="50" cy="65" r="3" fill="#3b82f6" stroke="white" stroke-width="2"/>
                                <circle cx="80" cy="70" r="3" fill="#3b82f6" stroke="white" stroke-width="2"/>
                                <circle cx="110" cy="55" r="3" fill="#3b82f6" stroke="white" stroke-width="2"/>
                                <circle cx="140" cy="45" r="3" fill="#3b82f6" stroke="white" stroke-width="2"/>
                                <circle cx="170" cy="50" r="3" fill="#3b82f6" stroke="white" stroke-width="2"/>
                                <circle cx="200" cy="35" r="3" fill="#3b82f6" stroke="white" stroke-width="2"/>
                                <circle cx="230" cy="40" r="3" fill="#3b82f6" stroke="white" stroke-width="2"/>
                                <circle cx="260" cy="25" r="3" fill="#3b82f6" stroke="white" stroke-width="2"/>
                                <circle cx="280" cy="30" r="3" fill="#3b82f6" stroke="white" stroke-width="2"/>
                            </g>
                            
                            <!-- Yè½´æ ‡ç­¾ -->
                            <g fill="#6b7280" font-size="10" font-family="Arial, sans-serif">
                                <text x="5" y="25" text-anchor="start">50k</text>
                                <text x="5" y="45" text-anchor="start">40k</text>
                                <text x="5" y="65" text-anchor="start">30k</text>
                                <text x="5" y="85" text-anchor="start">20k</text>
                                <text x="5" y="105" text-anchor="start">10k</text>
                            </g>
                            
                            <!-- Xè½´æ ‡ç­¾ -->
                            <g fill="#6b7280" font-size="9" font-family="Arial, sans-serif">
                                <text x="20" y="115" text-anchor="middle">1æ—¥</text>
                                <text x="80" y="115" text-anchor="middle">5æ—¥</text>
                                <text x="140" y="115" text-anchor="middle">10æ—¥</text>
                                <text x="200" y="115" text-anchor="middle">15æ—¥</text>
                                <text x="260" y="115" text-anchor="middle">20æ—¥</text>
                            </g>
                        </svg>
                        
                        <!-- å½“å‰æ•°å€¼æ˜¾ç¤º -->
                        <div class="absolute top-3 right-3 bg-white bg-opacity-90 rounded-lg px-3 py-1 shadow-sm">
                            <div class="text-xs text-gray-600">ä»Šæ—¥é”€å”®é¢</div>
                            <div class="text-sm font-bold text-blue-600">Â¥42,580</div>
                        </div>
                        
                        <!-- è¶‹åŠ¿æŒ‡ç¤ºå™¨ -->
                        <div class="absolute bottom-3 left-3 flex items-center space-x-2">
                            <div class="flex items-center space-x-1 bg-green-100 text-green-700 px-2 py-1 rounded-full">
                                <i class="fas fa-arrow-up text-xs"></i>
                                <span class="text-xs font-medium">+12.5%</span>
                            </div>
                            <span class="text-xs text-gray-600">è¾ƒæ˜¨æ—¥</span>
                        </div>
                    </div>
                </div>
                
                <!-- æ–°å¢ï¼šä»Šæ—¥åˆ©æ¶¦å¿«è§ˆ -->
                <div class="mt-4 p-3 bg-gray-50 rounded-lg">
                    <div class="flex items-center justify-between">
                        <span class="text-xs text-gray-600">ä»Šæ—¥æ¯›åˆ©</span>
                        <span class="text-sm font-medium text-green-600">Â¥3,774</span>
                    </div>
                    <div class="flex items-center justify-between mt-2">
                        <span class="text-xs text-gray-600">æ¯›åˆ©ç‡</span>
                        <span class="text-sm font-medium">30%</span>
                    </div>
                </div>
                
                <!-- çƒ­é”€äº§å“æ’è¡Œ -->
                <div class="mt-4 pt-4 border-t">
                    <h3 class="text-sm font-medium text-gray-800 mb-2">çƒ­é”€TOP3</h3>
                    <div class="space-y-2">
                        <div class="flex items-center justify-between">
                            <span class="text-xs text-gray-600">æ³•å¼é•¿æ£é¢åŒ…</span>
                            <span class="text-xs font-medium">128ä»½</span>
                        </div>
                        <div class="flex items-center justify-between">
                            <span class="text-xs text-gray-600">å·§å…‹åŠ›æ›²å¥‡</span>
                            <span class="text-xs font-medium">96ä»½</span>
                        </div>
                        <div class="flex items-center justify-between">
                            <span class="text-xs text-gray-600">è‰è“è›‹ç³•</span>
                            <span class="text-xs font-medium">82ä»½</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- åº“å­˜è¶‹åŠ¿å†…å®¹ -->
            <div id="inventoryContent" class="trend-content bg-white rounded-xl p-4 hidden">
                <div class="mb-4">
                    <h3 class="text-sm font-medium text-gray-800 mb-2">åº“å­˜æ°´å¹³è¶‹åŠ¿</h3>
                    <div class="h-40 bg-gradient-to-br from-orange-50 to-amber-100 rounded-lg p-4 relative overflow-hidden">
                        <!-- åº“å­˜æ°´å¹³è¶‹åŠ¿å›¾è¡¨ -->
                        <svg class="w-full h-full" viewBox="0 0 300 120" xmlns="http://www.w3.org/2000/svg">
                            <!-- ç½‘æ ¼çº¿ -->
                            <defs>
                                <pattern id="inventoryGrid" width="30" height="24" patternUnits="userSpaceOnUse">
                                    <path d="M 30 0 L 0 0 0 24" fill="none" stroke="#e5e7eb" stroke-width="0.5" opacity="0.5"/>
                                </pattern>
                                <linearGradient id="inventoryGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                                    <stop offset="0%" style="stop-color:#f59e0b;stop-opacity:0.3" />
                                    <stop offset="100%" style="stop-color:#f59e0b;stop-opacity:0.05" />
                                </linearGradient>
                            </defs>
                            
                            <!-- èƒŒæ™¯ç½‘æ ¼ -->
                            <rect width="100%" height="100%" fill="url(#inventoryGrid)" />
                            
                            <!-- åº“å­˜æ•°æ®æŸ±çŠ¶å›¾ -->
                            <g>
                                <!-- æŸ±çŠ¶å›¾ -->
                                <rect x="15" y="60" width="20" height="40" fill="#f59e0b" opacity="0.7" rx="2"/>
                                <rect x="45" y="45" width="20" height="55" fill="#f59e0b" opacity="0.7" rx="2"/>
                                <rect x="75" y="70" width="20" height="30" fill="#ef4444" opacity="0.7" rx="2"/>
                                <rect x="105" y="50" width="20" height="50" fill="#f59e0b" opacity="0.7" rx="2"/>
                                <rect x="135" y="35" width="20" height="65" fill="#10b981" opacity="0.7" rx="2"/>
                                <rect x="165" y="55" width="20" height="45" fill="#f59e0b" opacity="0.7" rx="2"/>
                                <rect x="195" y="75" width="20" height="25" fill="#ef4444" opacity="0.7" rx="2"/>
                                <rect x="225" y="40" width="20" height="60" fill="#f59e0b" opacity="0.7" rx="2"/>
                                <rect x="255" y="30" width="20" height="70" fill="#10b981" opacity="0.7" rx="2"/>
                            </g>
                            
                            <!-- Yè½´æ ‡ç­¾ -->
                            <g fill="#6b7280" font-size="10" font-family="Arial, sans-serif">
                                <text x="5" y="25" text-anchor="start">100%</text>
                                <text x="5" y="45" text-anchor="start">80%</text>
                                <text x="5" y="65" text-anchor="start">60%</text>
                                <text x="5" y="85" text-anchor="start">40%</text>
                                <text x="5" y="105" text-anchor="start">20%</text>
                            </g>
                            
                            <!-- Xè½´æ ‡ç­¾ -->
                            <g fill="#6b7280" font-size="9" font-family="Arial, sans-serif">
                                <text x="25" y="115" text-anchor="middle">é¢ç²‰</text>
                                <text x="55" y="115" text-anchor="middle">ç³–</text>
                                <text x="85" y="115" text-anchor="middle">é»„æ²¹</text>
                                <text x="115" y="115" text-anchor="middle">é¸¡è›‹</text>
                                <text x="145" y="115" text-anchor="middle">ç‰›å¥¶</text>
                                <text x="175" y="115" text-anchor="middle">é…µæ¯</text>
                                <text x="205" y="115" text-anchor="middle">ç›</text>
                                <text x="235" y="115" text-anchor="middle">é¦™è‰</text>
                                <text x="265" y="115" text-anchor="middle">å·§å…‹åŠ›</text>
                            </g>
                        </svg>
                        
                        <!-- åº“å­˜çŠ¶æ€æ˜¾ç¤º -->
                        <div class="absolute top-3 right-3 bg-white bg-opacity-90 rounded-lg px-3 py-1 shadow-sm">
                            <div class="text-xs text-gray-600">å¹³å‡åº“å­˜ç‡</div>
                            <div class="text-sm font-bold text-orange-600">68.5%</div>
                        </div>
                        
                        <!-- é¢„è­¦æŒ‡ç¤ºå™¨ -->
                        <div class="absolute bottom-3 left-3 flex items-center space-x-2">
                            <div class="flex items-center space-x-1 bg-red-100 text-red-700 px-2 py-1 rounded-full">
                                <i class="fas fa-exclamation-triangle text-xs"></i>
                                <span class="text-xs font-medium">2é¡¹é¢„è­¦</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- åº“å­˜é¢„è­¦ -->
                <div class="mt-4 pt-4 border-t">
                    <h3 class="text-sm font-medium text-gray-800 mb-2">åº“å­˜é¢„è­¦</h3>
                    <div class="space-y-2">
                        <div class="flex items-center justify-between">
                            <span class="text-xs text-gray-600">é«˜ç­‹é¢ç²‰</span>
                            <span class="text-xs font-medium text-red-600">15kg (ä½åº“å­˜)</span>
                        </div>
                        <div class="flex items-center justify-between">
                            <span class="text-xs text-gray-600">é»„æ²¹</span>
                            <span class="text-xs font-medium text-orange-600">8kg (éœ€è¡¥è´§)</span>
                        </div>
                        <div class="flex items-center justify-between">
                            <span class="text-xs text-gray-600">é¸¡è›‹</span>
                            <span class="text-xs font-medium text-green-600">120ä¸ª (å……è¶³)</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- ç”Ÿäº§è¶‹åŠ¿å†…å®¹ -->
            <div id="productionContent" class="trend-content bg-white rounded-xl p-4 hidden">
                <div class="mb-4">
                    <h3 class="text-sm font-medium text-gray-800 mb-2">ç”Ÿäº§æ•ˆç‡è¶‹åŠ¿</h3>
                    <div class="h-40 bg-gradient-to-br from-purple-50 to-indigo-100 rounded-lg p-4 relative overflow-hidden">
                        <!-- ç”Ÿäº§æ•ˆç‡è¶‹åŠ¿å›¾è¡¨ -->
                        <svg class="w-full h-full" viewBox="0 0 300 120" xmlns="http://www.w3.org/2000/svg">
                            <!-- ç½‘æ ¼çº¿ -->
                            <defs>
                                <pattern id="productionGrid" width="30" height="24" patternUnits="userSpaceOnUse">
                                    <path d="M 30 0 L 0 0 0 24" fill="none" stroke="#e5e7eb" stroke-width="0.5" opacity="0.5"/>
                                </pattern>
                                <linearGradient id="productionGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                                    <stop offset="0%" style="stop-color:#8b5cf6;stop-opacity:0.3" />
                                    <stop offset="100%" style="stop-color:#8b5cf6;stop-opacity:0.05" />
                                </linearGradient>
                            </defs>
                            
                            <!-- èƒŒæ™¯ç½‘æ ¼ -->
                            <rect width="100%" height="100%" fill="url(#productionGrid)" />
                            
                            <!-- ç”Ÿäº§æ•ˆç‡æ•°æ®çº¿å›¾ -->
                            <g>
                                <!-- é¢ç§¯å¡«å…… -->
                                <path d="M 30 80 L 60 65 L 90 70 L 120 55 L 150 45 L 180 50 L 210 40 L 240 35 L 270 30 L 270 100 L 30 100 Z" 
                                      fill="url(#productionGradient)" />
                                
                                <!-- ä¸»çº¿æ¡ -->
                                <path d="M 30 80 L 60 65 L 90 70 L 120 55 L 150 45 L 180 50 L 210 40 L 240 35 L 270 30" 
                                      fill="none" stroke="#8b5cf6" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
                                
                                <!-- æ•°æ®ç‚¹ -->
                                <circle cx="30" cy="80" r="3" fill="#8b5cf6" stroke="white" stroke-width="2"/>
                                <circle cx="60" cy="65" r="3" fill="#8b5cf6" stroke="white" stroke-width="2"/>
                                <circle cx="90" cy="70" r="3" fill="#8b5cf6" stroke="white" stroke-width="2"/>
                                <circle cx="120" cy="55" r="3" fill="#8b5cf6" stroke="white" stroke-width="2"/>
                                <circle cx="150" cy="45" r="3" fill="#8b5cf6" stroke="white" stroke-width="2"/>
                                <circle cx="180" cy="50" r="3" fill="#8b5cf6" stroke="white" stroke-width="2"/>
                                <circle cx="210" cy="40" r="3" fill="#8b5cf6" stroke="white" stroke-width="2"/>
                                <circle cx="240" cy="35" r="3" fill="#8b5cf6" stroke="white" stroke-width="2"/>
                                <circle cx="270" cy="30" r="4" fill="#6366f1" stroke="white" stroke-width="2"/>
                            </g>
                            
                            <!-- Yè½´æ ‡ç­¾ -->
                            <g fill="#6b7280" font-size="10" font-family="Arial, sans-serif">
                                <text x="5" y="25" text-anchor="start">100%</text>
                                <text x="5" y="45" text-anchor="start">80%</text>
                                <text x="5" y="65" text-anchor="start">60%</text>
                                <text x="5" y="85" text-anchor="start">40%</text>
                                <text x="5" y="105" text-anchor="start">20%</text>
                            </g>
                            
                            <!-- Xè½´æ ‡ç­¾ -->
                            <g fill="#6b7280" font-size="9" font-family="Arial, sans-serif">
                                <text x="30" y="115" text-anchor="middle">8:00</text>
                                <text x="60" y="115" text-anchor="middle">10:00</text>
                                <text x="90" y="115" text-anchor="middle">12:00</text>
                                <text x="120" y="115" text-anchor="middle">14:00</text>
                                <text x="150" y="115" text-anchor="middle">16:00</text>
                                <text x="180" y="115" text-anchor="middle">18:00</text>
                                <text x="210" y="115" text-anchor="middle">20:00</text>
                                <text x="240" y="115" text-anchor="middle">22:00</text>
                                <text x="270" y="115" text-anchor="middle">24:00</text>
                            </g>
                        </svg>
                        
                        <!-- å½“å‰æ•ˆç‡æ˜¾ç¤º -->
                        <div class="absolute top-3 right-3 bg-white bg-opacity-90 rounded-lg px-3 py-1 shadow-sm">
                            <div class="text-xs text-gray-600">å½“å‰æ•ˆç‡</div>
                            <div class="text-sm font-bold text-purple-600">92.8%</div>
                        </div>
                        
                        <!-- è¶‹åŠ¿æŒ‡ç¤ºå™¨ -->
                        <div class="absolute bottom-3 left-3 flex items-center space-x-2">
                            <div class="flex items-center space-x-1 bg-green-100 text-green-700 px-2 py-1 rounded-full">
                                <i class="fas fa-arrow-up text-xs"></i>
                                <span class="text-xs font-medium">æ•ˆç‡æå‡</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- ç”Ÿäº§ç»Ÿè®¡ -->
                <div class="mt-4 pt-4 border-t">
                    <h3 class="text-sm font-medium text-gray-800 mb-2">ä»Šæ—¥ç”Ÿäº§</h3>
                    <div class="space-y-2">
                        <div class="flex items-center justify-between">
                            <span class="text-xs text-gray-600">é¢åŒ…ç±»</span>
                            <span class="text-xs font-medium">85% (68/80)</span>
                        </div>
                        <div class="flex items-center justify-between">
                            <span class="text-xs text-gray-600">è›‹ç³•ç±»</span>
                            <span class="text-xs font-medium">92% (23/25)</span>
                        </div>
                        <div class="flex items-center justify-between">
                            <span class="text-xs text-gray-600">é¥¼å¹²ç±»</span>
                            <span class="text-xs font-medium">100% (15/15)</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>





    </main>

    <button class="floating-add-btn" onclick="showPublishMenu()">
        <i class="fas fa-plus text-xl"></i>
    </button>

    <!-- åŠŸèƒ½è®¾ç½®å¼¹çª— -->
    <div id="settingsModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden">
        <div class="absolute bottom-0 left-0 right-0 bg-white rounded-t-3xl max-h-[85vh] flex flex-col">
            <!-- å¼¹çª—å¤´éƒ¨ - å›ºå®šä¸æ»šåŠ¨ -->
            <div class="flex items-center justify-between p-6 pb-4 border-b border-gray-100 flex-shrink-0">
                <h3 class="text-lg font-semibold text-gray-800">åŠŸèƒ½è®¾ç½®</h3>
                <button id="closeSettings" class="w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center hover:bg-gray-200 transition-colors">
                    <i class="fas fa-times text-gray-600"></i>
                </button>
            </div>
            
            <!-- å¼¹çª—å†…å®¹ - å¯æ»šåŠ¨åŒºåŸŸ -->
            <div class="flex-1 overflow-y-auto px-6 pb-6" style="-webkit-overflow-scrolling: touch; scroll-behavior: smooth;">
                <!-- å½“å‰åŠŸèƒ½åˆ—è¡¨ -->
                <div class="mb-6 mt-4">
                    <h4 class="text-sm font-medium text-gray-600 mb-3 sticky top-0 bg-white py-2 z-10">å½“å‰æ˜¾ç¤ºåŠŸèƒ½</h4>
                    <div id="currentFunctions" class="space-y-2">
                        <!-- åŠ¨æ€ç”Ÿæˆå½“å‰åŠŸèƒ½åˆ—è¡¨ -->
                    </div>
                </div>
                
                <!-- å¯æ·»åŠ åŠŸèƒ½åˆ—è¡¨ -->
                <div class="pb-4">
                    <h4 class="text-sm font-medium text-gray-600 mb-3 sticky top-0 bg-white py-2 z-10">å¯æ·»åŠ åŠŸèƒ½</h4>
                    <div id="availableFunctions" class="space-y-2">
                        <!-- åŠ¨æ€ç”Ÿæˆå¯æ·»åŠ åŠŸèƒ½åˆ—è¡¨ -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- åº•éƒ¨å¯¼èˆªæ  -->
    <nav class="bottom-nav" id="mainBottomNav">
        <div class="grid grid-cols-4">
            <a href="#" class="bottom-nav-item active">
                <i class="fas fa-home"></i>
                <span>é¦–é¡µ</span>
            </a>
            <a href="../cangku-gongneng/erp-zhuye-canku.html" class="bottom-nav-item">
                <i class="fas fa-chart-pie"></i>
                <span>ERP</span>
            </a>
            <a href="../shequ/shequ-zhuye.html" class="bottom-nav-item">
                <i class="fas fa-users"></i>
                <span>ç¤¾åŒº</span>
            </a>
            <a href="../wode/wodezhuye.html" class="bottom-nav-item">
                <i class="fas fa-user"></i>
                <span>æˆ‘çš„</span>
            </a>
        </div>
    </nav>

    <script>
        function toggleFollow(btn) {
            if (btn.innerText === 'å…³æ³¨') {
                btn.innerText = 'å·²å…³æ³¨';
                btn.classList.remove('text-orange-500', 'bg-orange-50');
                btn.classList.add('text-gray-400', 'bg-gray-100');
            } else {
                btn.innerText = 'å…³æ³¨';
                btn.classList.add('text-orange-500', 'bg-orange-50');
                btn.classList.remove('text-gray-400', 'bg-gray-100');
            }
        }
        function showPublishMenu() {
            if(confirm('ä½ æƒ³å‘å¸ƒä»€ä¹ˆï¼Ÿ\n\n[ç¡®å®š] - å†™é£Ÿè°±\n[å–æ¶ˆ] - æ™’ä½œå“ (äº¤ä½œä¸š)')) {
                console.log('å»å†™é£Ÿè°±');
            } else {
                console.log('å»æ™’ä½œå“');
            }
        }
        // åº•éƒ¨å¯¼èˆªåˆ‡æ¢
        document.addEventListener('DOMContentLoaded', function() {
            const navItems = document.querySelectorAll('.bottom-nav-item');
            
            // æ£€æµ‹æ˜¯å¦æœ‰é‡å¤çš„åº•éƒ¨å¯¼èˆªæ 
            const checkForDuplicateNavbar = function() {
                const allNavbars = document.querySelectorAll('.bottom-nav');
                if (allNavbars.length > 1) {
                    // ä¿ç•™å½“å‰é¡µé¢çš„å¯¼èˆªæ ï¼Œç§»é™¤å…¶ä»–å¯¼èˆªæ 
                    for (let i = 1; i < allNavbars.length; i++) {
                        if (allNavbars[i].id !== 'mainBottomNav') {
                            allNavbars[i].remove();
                        }
                    }
                }
            };
            
            // é¡µé¢åŠ è½½å®Œæˆåæ‰§è¡Œæ£€æŸ¥
            checkForDuplicateNavbar();
            
            // ä¹Ÿå¯ä»¥åœ¨ä¸€æ®µæ—¶é—´åå†æ¬¡æ£€æŸ¥ï¼Œä»¥é˜²åŠ¨æ€åŠ è½½çš„æƒ…å†µ
            setTimeout(checkForDuplicateNavbar, 500);
            
            navItems.forEach(item => {
                item.addEventListener('click', function(e) {
                    // å¦‚æœæ˜¯é“¾æ¥ï¼Œä¸é˜»æ­¢é»˜è®¤è¡Œä¸º
                    if (this.getAttribute('href') !== '#') {
                        return;
                    }
                    
                    e.preventDefault();
                    
                    // ç§»é™¤æ‰€æœ‰æ´»åŠ¨çŠ¶æ€
                    navItems.forEach(navItem => {
                        navItem.classList.remove('active');
                    });
                    
                    // æ·»åŠ æ´»åŠ¨çŠ¶æ€åˆ°å½“å‰ç‚¹å‡»é¡¹
                    this.classList.add('active');
                });
            });
            
            // å¡ç‰‡ç‚¹å‡»æ•ˆæœ
            const cards = document.querySelectorAll('.card');
            cards.forEach(card => {
                card.addEventListener('touchstart', function() {
                    this.style.transform = 'scale(0.98)';
                });
                
                card.addEventListener('touchend', function() {
                    this.style.transform = 'scale(1)';
                });
            });
            
            // ä»»åŠ¡å¤é€‰æ¡†å¤„ç†
            const checkboxes = document.querySelectorAll('input[type="checkbox"]');
            checkboxes.forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    const taskItem = this.closest('.flex');
                    const taskText = taskItem.querySelector('.text-sm');
                    const statusBadge = taskItem.querySelector('span:last-child');
                    
                    if (this.checked) {
                        taskItem.classList.add('opacity-60');
                        taskText.classList.add('line-through');
                        statusBadge.textContent = 'å·²å®Œæˆ';
                        statusBadge.className = 'text-xs text-green-600 bg-green-100 px-2 py-1 rounded';
                    } else {
                        taskItem.classList.remove('opacity-60');
                        taskText.classList.remove('line-through');
                        statusBadge.textContent = 'å¾…å®Œæˆ';
                        statusBadge.className = 'text-xs text-yellow-600 bg-yellow-100 px-2 py-1 rounded';
                    }
                });
            });
            
            // é…æ–¹è½®æ’­å›¾åŠŸèƒ½
            const carousel = document.getElementById('recipeCarousel');
            const dots = document.querySelectorAll('.carousel-dot');
            let currentIndex = 0;
            const totalSlides = 3;
            
            function updateCarousel() {
                const translateX = -currentIndex * 100;
                carousel.style.transform = `translateX(${translateX}%)`;
                
                // æ›´æ–°æŒ‡ç¤ºå™¨
                dots.forEach((dot, index) => {
                    if (index === currentIndex) {
                        dot.classList.remove('bg-gray-300');
                        dot.classList.add('bg-blue-600');
                    } else {
                        dot.classList.remove('bg-blue-600');
                        dot.classList.add('bg-gray-300');
                    }
                });
            }
            
            // æŒ‡ç¤ºå™¨ç‚¹å‡»äº‹ä»¶
            dots.forEach((dot, index) => {
                dot.addEventListener('click', () => {
                    currentIndex = index;
                    updateCarousel();
                });
            });
            
            // è‡ªåŠ¨è½®æ’­
            setInterval(() => {
                currentIndex = (currentIndex + 1) % totalSlides;
                updateCarousel();
            }, 4000);
            
            // æ•°æ®è¶‹åŠ¿å›¾è½®æ’­
            let currentTrendSlide = 0;
            const trendCarousel = document.getElementById('trendCarousel');
            const trendDots = document.querySelectorAll('.trend-dot');
            const trendCards = document.querySelectorAll('.trend-carousel > div');
            const totalTrendSlides = trendCards.length;

            function updateTrendCarousel() {
                const cardWidth = 320; // å¡ç‰‡å®½åº¦ + é—´è·
                trendCarousel.style.transform = `translateX(-${currentTrendSlide * cardWidth}px)`;
                trendDots.forEach((dot, index) => {
                    dot.classList.toggle('bg-blue-600', index === currentTrendSlide);
                    dot.classList.toggle('bg-gray-300', index !== currentTrendSlide);
                });
            }

            function nextTrendSlide() {
                currentTrendSlide = (currentTrendSlide + 1) % totalTrendSlides;
                updateTrendCarousel();
            }

            // è¶‹åŠ¿å›¾æŒ‡ç¤ºå™¨ç‚¹å‡»
            trendDots.forEach((dot, index) => {
                dot.addEventListener('click', () => {
                    currentTrendSlide = index;
                    updateTrendCarousel();
                });
            });

            // è¶‹åŠ¿å›¾è‡ªåŠ¨æ’­æ”¾
            setInterval(nextTrendSlide, 5000);

            // æœç´¢åŠŸèƒ½
            const searchInput = document.querySelector('input[placeholder*="æœç´¢"]');
            searchInput.addEventListener('focus', function() {
                this.parentElement.classList.add('ring-2', 'ring-blue-500');
            });
            
            searchInput.addEventListener('blur', function() {
                this.parentElement.classList.remove('ring-2', 'ring-blue-500');
            });
            
            searchInput.addEventListener('input', function() {
                // è¿™é‡Œå¯ä»¥æ·»åŠ å®æ—¶æœç´¢é€»è¾‘
                console.log('æœç´¢å†…å®¹:', this.value);
            });
            
            // è§¦æ‘¸æ»‘åŠ¨æ”¯æŒ
            let startX = 0;
            let isDragging = false;
            
            carousel.addEventListener('touchstart', (e) => {
                startX = e.touches[0].clientX;
                isDragging = true;
            });
            
            carousel.addEventListener('touchmove', (e) => {
                if (!isDragging) return;
                e.preventDefault();
            });
            
            carousel.addEventListener('touchend', (e) => {
                 if (!isDragging) return;
                 isDragging = false;
                 
                 const endX = e.changedTouches[0].clientX;
                 const diffX = startX - endX;
                 
                 if (Math.abs(diffX) > 50) {
                     if (diffX > 0 && currentIndex < totalSlides - 1) {
                         currentIndex++;
                     } else if (diffX < 0 && currentIndex > 0) {
                         currentIndex--;
                     }
                     updateCarousel();
                 }
             });
             
             // åŠŸèƒ½è®¾ç½®ç®¡ç†
            const allFunctions = [
                { name: 'é…æ–¹ç®¡ç†', icon: 'fas fa-book', gradient: 'gradient-recipe', href: '../peifnagmokuai/mianbao/mianbaozhuye/zhuye.html', id: 'peifang', fixed: true },
                { name: 'æ¶ˆæ¯ä¸­å¿ƒ', icon: 'fas fa-envelope', gradient: 'gradient-message', href: '#', id: 'xiaoxi', fixed: true },
                { name: 'åº“å­˜æŸ¥çœ‹', icon: 'fas fa-boxes', gradient: 'gradient-inventory', href: 'cailiaokucun-mobile.html', id: 'kucun', removable: true },
                { name: 'å¿«é€Ÿå…¥åº“', icon: 'fas fa-plus-circle', gradient: 'gradient-order', href: 'rukuye-mobile.html', id: 'ruku', removable: true },
                { name: 'è¦è´§ç”³è¯·', icon: 'fas fa-clipboard-list', gradient: 'bg-gradient-to-r from-indigo-500 to-purple-600', href: '#', id: 'yaohuo', removable: true },
                { name: 'ç”Ÿäº§é…æ–™', icon: 'fas fa-cogs', gradient: 'bg-gradient-to-r from-teal-500 to-cyan-600', href: '#', id: 'shengchan', removable: true },
                { name: 'å‡ºåº“ç®¡ç†', icon: 'fas fa-truck', gradient: 'gradient-primary', href: 'chukuye-mobile.html', id: 'chuku' },
                { name: 'åº“å­˜é¢„è­¦', icon: 'fas fa-exclamation-triangle', gradient: 'gradient-inventory', href: 'kucunyujingye-mobile.html', id: 'yujing' },
                { name: 'æ•°æ®ç»Ÿè®¡', icon: 'fas fa-chart-bar', gradient: 'gradient-primary', href: '#', id: 'tongji' },
                { name: 'å‘˜å·¥ç®¡ç†', icon: 'fas fa-users', gradient: 'gradient-recipe', href: '#', id: 'yuangong' },
                { name: 'è®¢å•ç®¡ç†', icon: 'fas fa-clipboard-list', gradient: 'gradient-message', href: '#', id: 'dingdan' },
                { name: 'è´¢åŠ¡æŠ¥è¡¨', icon: 'fas fa-file-invoice-dollar', gradient: 'gradient-order', href: '#', id: 'caiwu' }
            ];
             
             // è·å–å½“å‰æ˜¾ç¤ºçš„åŠŸèƒ½
             function getCurrentFunctions() {
                 const grid = document.getElementById('functionsGrid');
                 const currentItems = grid.querySelectorAll('.card');
                 const current = [];
                 
                 currentItems.forEach(item => {
                     const link = item.querySelector('a');
                     const icon = item.querySelector('i').className;
                     const name = item.querySelector('.text-xs').textContent;
                     const href = link ? link.getAttribute('href') : '#';
                     
                     // æŸ¥æ‰¾å¯¹åº”çš„åŠŸèƒ½ID
                     const func = allFunctions.find(f => f.name === name);
                     if (func) {
                         current.push(func);
                     }
                 });
                 
                 return current;
             }
             
             // è·å–å¯æ·»åŠ çš„åŠŸèƒ½
             function getAvailableFunctions() {
                 const current = getCurrentFunctions();
                 const currentIds = current.map(f => f.id);
                 return allFunctions.filter(f => !currentIds.includes(f.id));
             }
             
             // æ‰“å¼€è®¾ç½®å¼¹çª—
             window.openSettings = function() {
                 const modal = document.getElementById('settingsModal');
                 const currentContainer = document.getElementById('currentFunctions');
                 const availableContainer = document.getElementById('availableFunctions');
                 
                 // æ¸…ç©ºå®¹å™¨
                 currentContainer.innerHTML = '';
                 availableContainer.innerHTML = '';
                 
                 // å¡«å……å½“å‰åŠŸèƒ½
                 const currentFunctions = getCurrentFunctions();
                 currentFunctions.forEach(func => {
                     const item = document.createElement('div');
                     item.className = 'flex items-center justify-between p-3 bg-gray-50 rounded-lg';
                     
                     // æ£€æŸ¥æ˜¯å¦ä¸ºå›ºå®šåŠŸèƒ½ï¼ˆä¸å¯åˆ é™¤ï¼‰
                     const isFixed = func.fixed || func.name === 'é…æ–¹ç®¡ç†' || func.name === 'æ¶ˆæ¯ä¸­å¿ƒ';
                     
                     item.innerHTML = `
                         <div class="flex items-center space-x-3">
                             <div class="w-8 h-8 ${func.gradient} rounded-lg flex items-center justify-center">
                                 <i class="${func.icon} text-white text-sm"></i>
                             </div>
                             <span class="text-sm font-medium">${func.name}</span>
                             ${isFixed ? '<span class="text-xs text-gray-500 bg-gray-200 px-2 py-1 rounded-full ml-2">å›ºå®š</span>' : ''}
                         </div>
                         ${isFixed ? 
                             '<span class="text-gray-400"><i class="fas fa-lock text-sm"></i></span>' : 
                             `<button class="text-red-500 hover:text-red-700" onclick="removeFunction('${func.id}')"><i class="fas fa-trash text-sm"></i></button>`
                         }
                     `;
                     currentContainer.appendChild(item);
                 });
                 
                 // å¡«å……å¯æ·»åŠ åŠŸèƒ½
                 const availableFunctions = getAvailableFunctions();
                 availableFunctions.forEach(func => {
                     const item = document.createElement('div');
                     item.className = 'flex items-center justify-between p-3 bg-gray-50 rounded-lg';
                     item.innerHTML = `
                         <div class="flex items-center space-x-3">
                             <div class="w-8 h-8 ${func.gradient} rounded-lg flex items-center justify-center">
                                 <i class="${func.icon} text-white text-sm"></i>
                             </div>
                             <span class="text-sm font-medium">${func.name}</span>
                         </div>
                         <button class="text-blue-500 hover:text-blue-700" onclick="addFunction('${func.id}')">
                             <i class="fas fa-plus text-sm"></i>
                         </button>
                     `;
                     availableContainer.appendChild(item);
                 });
                 
                 modal.classList.remove('hidden');
             };
             
             // æ•°æ®åŠ è½½å’Œåˆ·æ–°åŠŸèƒ½
             let isRefreshing = false;
             let startY = 0;
             let currentY = 0;
             let pullDistance = 0;
             const maxPullDistance = 80;
             
             // ä¸‹æ‹‰åˆ·æ–°åŠŸèƒ½
             function initPullToRefresh() {
                 const container = document.querySelector('main');
                 const refreshIndicator = document.createElement('div');
                 refreshIndicator.id = 'refreshIndicator';
                 refreshIndicator.className = 'fixed top-0 left-0 right-0 bg-blue-500 text-white text-center py-2 transform -translate-y-full transition-transform duration-300 z-50';
                 refreshIndicator.innerHTML = '<i class="fas fa-sync-alt mr-2"></i>ä¸‹æ‹‰åˆ·æ–°æ•°æ®';
                 document.body.appendChild(refreshIndicator);
                 
                 container.addEventListener('touchstart', function(e) {
                     if (window.scrollY === 0 && !isRefreshing) {
                         startY = e.touches[0].clientY;
                     }
                 });
                 
                 container.addEventListener('touchmove', function(e) {
                     if (window.scrollY === 0 && !isRefreshing && startY > 0) {
                         currentY = e.touches[0].clientY;
                         pullDistance = Math.max(0, currentY - startY);
                         
                         if (pullDistance > 0) {
                             e.preventDefault();
                             const progress = Math.min(pullDistance / maxPullDistance, 1);
                             refreshIndicator.style.transform = `translateY(${progress * 100 - 100}%)`;
                             
                             if (pullDistance >= maxPullDistance) {
                                 refreshIndicator.innerHTML = '<i class="fas fa-sync-alt mr-2 animate-spin"></i>é‡Šæ”¾åˆ·æ–°';
                             } else {
                                 refreshIndicator.innerHTML = '<i class="fas fa-sync-alt mr-2"></i>ä¸‹æ‹‰åˆ·æ–°æ•°æ®';
                             }
                         }
                     }
                 });
                 
                 container.addEventListener('touchend', function(e) {
                     if (pullDistance >= maxPullDistance && !isRefreshing) {
                         triggerRefresh();
                     } else {
                         refreshIndicator.style.transform = 'translateY(-100%)';
                     }
                     startY = 0;
                     pullDistance = 0;
                 });
             }
             
             // è§¦å‘åˆ·æ–°
             function triggerRefresh() {
                 if (isRefreshing) return;
                 
                 isRefreshing = true;
                 const refreshIndicator = document.getElementById('refreshIndicator');
                 refreshIndicator.innerHTML = '<i class="fas fa-sync-alt mr-2 animate-spin"></i>æ­£åœ¨åˆ·æ–°...';
                 refreshIndicator.style.transform = 'translateY(0%)';
                 
                 // æ˜¾ç¤ºéª¨æ¶å±
                 showSkeleton();
                 
                 // æ¨¡æ‹Ÿæ•°æ®åŠ è½½
                 setTimeout(() => {
                     loadOverviewData();
                     refreshIndicator.style.transform = 'translateY(-100%)';
                     isRefreshing = false;
                 }, 2000);
             }
             
             // æ˜¾ç¤ºéª¨æ¶å±
             function showSkeleton() {
                 document.getElementById('overviewData').classList.add('hidden');
                 document.getElementById('overviewSkeleton').classList.remove('hidden');
                 document.getElementById('dataError').classList.add('hidden');
             }
             
             // éšè—éª¨æ¶å±
             function hideSkeleton() {
                 document.getElementById('overviewSkeleton').classList.add('hidden');
                 document.getElementById('overviewData').classList.remove('hidden');
             }
             
             // æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
             function showError() {
                 document.getElementById('overviewSkeleton').classList.add('hidden');
                 document.getElementById('overviewData').classList.add('hidden');
                 document.getElementById('dataError').classList.remove('hidden');
             }
             
             // åŠ è½½æ¦‚è§ˆæ•°æ®
             function loadOverviewData() {
                 // æ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚
                 const success = Math.random() > 0.1; // 90% æˆåŠŸç‡
                 
                 setTimeout(() => {
                     if (success) {
                         // æ›´æ–°æ•°æ®æ—¶é—´
                         const timeElement = document.querySelector('.text-xs.text-gray-500 span');
                         if (timeElement) {
                             timeElement.textContent = 'æ•°æ®æ›´æ–°äº åˆšåˆš';
                         }
                         
                         // æ¨¡æ‹Ÿæ•°æ®æ›´æ–°
                         updateOverviewNumbers();
                         hideSkeleton();
                         
                         // æ˜¾ç¤ºæˆåŠŸæç¤º
                         showToast('æ•°æ®åˆ·æ–°æˆåŠŸ', 'success');
                     } else {
                         showError();
                         showToast('æ•°æ®åŠ è½½å¤±è´¥', 'error');
                     }
                 }, 1000);
             }
             
             // æ›´æ–°æ¦‚è§ˆæ•°å­—
             function updateOverviewNumbers() {
                 const salesAmount = document.querySelector('#overviewData .text-xl:first-of-type');
                 const ordersCount = document.querySelector('#overviewData .text-xl:nth-of-type(2)');
                 const warningCount = document.querySelector('#overviewData .text-xl:nth-of-type(3)');
                 const expiryCount = document.querySelector('#overviewData .text-xl:nth-of-type(4)');
                 
                 if (salesAmount) {
                     const newAmount = (Math.random() * 5000 + 10000).toFixed(0);
                     salesAmount.textContent = `Â¥${newAmount.toLocaleString()}`;
                 }
                 
                 if (ordersCount) {
                     const completed = Math.floor(Math.random() * 20 + 60);
                     const total = Math.floor(Math.random() * 10 + 75);
                     ordersCount.textContent = `${completed}/${total}`;
                 }
                 
                 if (warningCount) {
                     warningCount.textContent = Math.floor(Math.random() * 8 + 2);
                 }
                 
                 if (expiryCount) {
                     expiryCount.textContent = Math.floor(Math.random() * 5 + 1);
                 }
             }
             
             // é‡è¯•åŠ è½½æ•°æ®
             window.retryLoadData = function() {
                 showSkeleton();
                 loadOverviewData();
             };
             
             // åˆ·æ–°è¶‹åŠ¿æ•°æ®
             window.refreshTrendData = function() {
                 const button = event.target.closest('button');
                 const icon = button.querySelector('i');
                 
                 icon.classList.add('animate-spin');
                 
                 setTimeout(() => {
                     icon.classList.remove('animate-spin');
                     showToast('è¶‹åŠ¿æ•°æ®å·²æ›´æ–°', 'success');
                 }, 1500);
             };
             
             // æ˜¾ç¤ºæç¤ºæ¶ˆæ¯
             function showToast(message, type = 'info') {
                 const toast = document.createElement('div');
                 const bgColor = type === 'success' ? 'bg-green-500' : type === 'error' ? 'bg-red-500' : 'bg-blue-500';
                 toast.className = `fixed top-4 left-1/2 transform -translate-x-1/2 ${bgColor} text-white px-4 py-2 rounded-lg z-50 transition-all duration-300`;
                 toast.textContent = message;
                 document.body.appendChild(toast);
                 
                 setTimeout(() => {
                     toast.style.opacity = '0';
                     toast.style.transform = 'translate(-50%, -100%)';
                     setTimeout(() => {
                         if (document.body.contains(toast)) {
                             document.body.removeChild(toast);
                         }
                     }, 300);
                 }, 2000);
             }
             
             // æ·»åŠ è§¦è§‰åé¦ˆ
             function addHapticFeedback() {
                 if ('vibrate' in navigator) {
                     // ä¸ºå¡ç‰‡ç‚¹å‡»æ·»åŠ è§¦è§‰åé¦ˆ
                     document.querySelectorAll('#overviewData .cursor-pointer').forEach(card => {
                         card.addEventListener('touchstart', () => {
                             navigator.vibrate(10); // è½»å¾®éœ‡åŠ¨
                         });
                     });
                     
                     // ä¸ºæŒ‰é’®æ·»åŠ è§¦è§‰åé¦ˆ
                     document.querySelectorAll('button').forEach(button => {
                         button.addEventListener('touchstart', () => {
                             navigator.vibrate(5);
                         });
                     });
                 }
             }
             
             // åˆå§‹åŒ–æ‰€æœ‰åŠŸèƒ½
             function initMobileFeatures() {
                 initPullToRefresh();
                 addHapticFeedback();
                 
                 // åˆå§‹åŠ è½½æ•°æ®
                 setTimeout(() => {
                     loadOverviewData();
                 }, 500);
             }
             
             // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
             initMobileFeatures();
             
             // æ•°æ®å¯¼å‡ºåŠŸèƒ½
             window.exportData = function(type) {
                 showToast('æ­£åœ¨å‡†å¤‡å¯¼å‡ºæ•°æ®...', 'info');
                 
                 setTimeout(() => {
                     const data = {
                         exportTime: new Date().toLocaleString(),
                         type: type,
                         data: {
                             sales: 'Â¥12,580',
                             orders: '68/75',
                             warnings: '5',
                             expiry: '3'
                         }
                     };
                     
                     const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
                     const url = URL.createObjectURL(blob);
                     const a = document.createElement('a');
                     a.href = url;
                     a.download = `${type}_data_${new Date().getTime()}.json`;
                     document.body.appendChild(a);
                     a.click();
                     document.body.removeChild(a);
                     URL.revokeObjectURL(url);
                     
                     showToast('æ•°æ®å¯¼å‡ºæˆåŠŸ', 'success');
                 }, 1000);
             };
             
             // å…³é—­è®¾ç½®å¼¹çª—
             window.closeSettings = function() {
                 const modal = document.getElementById('settingsModal');
                 modal.classList.add('hidden');
             };
             
             // æ·»åŠ åŠŸèƒ½
             window.addFunction = function(functionId) {
                 const func = allFunctions.find(f => f.id === functionId);
                 if (!func) return;
                 
                 const grid = document.getElementById('functionsGrid');
                 const newFunction = document.createElement('a');
                 newFunction.href = func.href;
                 newFunction.className = 'card bg-white rounded-xl p-4 text-center';
                 
                 // æ ¹æ®åŠŸèƒ½æ˜¯å¦å¯åˆ é™¤æ·»åŠ ç›¸åº”å±æ€§
                 if (func.removable) {
                     newFunction.setAttribute('data-removable', 'true');
                 } else if (func.fixed) {
                     newFunction.setAttribute('data-fixed', 'true');
                 }
                 
                 newFunction.innerHTML = `
                     <div class="feature-icon ${func.gradient} mx-auto mb-2">
                         <i class="${func.icon} text-white"></i>
                     </div>
                     <div class="text-xs text-gray-700 font-medium">${func.name}</div>
                 `;
                 grid.appendChild(newFunction);
                 
                 // åˆ·æ–°å¼¹çª—å†…å®¹
                 openSettings();
             };
             
             // åˆ é™¤åŠŸèƒ½
             window.removeFunction = function(functionId) {
                 const func = allFunctions.find(f => f.id === functionId);
                 if (!func) return;
                 
                 // æ£€æŸ¥æ˜¯å¦ä¸ºå›ºå®šåŠŸèƒ½ï¼Œä¸å…è®¸åˆ é™¤
                 if (func.fixed || func.name === 'é…æ–¹ç®¡ç†' || func.name === 'æ¶ˆæ¯ä¸­å¿ƒ') {
                     alert('æ­¤åŠŸèƒ½ä¸ºç³»ç»Ÿæ ¸å¿ƒåŠŸèƒ½ï¼Œä¸å¯åˆ é™¤');
                     return;
                 }
                 
                 const grid = document.getElementById('functionsGrid');
                 const items = grid.querySelectorAll('.card');
                 
                 items.forEach(item => {
                     const name = item.querySelector('.text-xs').textContent;
                     if (name === func.name) {
                         item.remove();
                     }
                 });
                 
                 // åˆ·æ–°å¼¹çª—å†…å®¹
                 openSettings();
             };
             
             // ç»‘å®šå…³é—­æŒ‰é’®äº‹ä»¶
             document.getElementById('closeSettings').addEventListener('click', closeSettings);
             
             // ç‚¹å‡»å¼¹çª—å¤–éƒ¨å…³é—­
             document.getElementById('settingsModal').addEventListener('click', function(e) {
                 if (e.target === this) {
                     closeSettings();
                 }
             });
             
             // ä¸šåŠ¡è¶‹åŠ¿æ ‡ç­¾é¡µåˆ‡æ¢åŠŸèƒ½
             const trendTabs = document.querySelectorAll('.trend-tab');
             const trendContents = document.querySelectorAll('.trend-content');

             trendTabs.forEach(tab => {
                 tab.addEventListener('click', function() {
                     const targetTab = this.getAttribute('data-tab');
                     
                     // ç§»é™¤æ‰€æœ‰æ ‡ç­¾é¡µçš„æ¿€æ´»çŠ¶æ€
                     trendTabs.forEach(t => {
                         t.classList.remove('text-blue-600', 'border-b-2', 'border-blue-600');
                         t.classList.add('text-gray-500');
                     });
                     
                     // æ¿€æ´»å½“å‰ç‚¹å‡»çš„æ ‡ç­¾é¡µ
                     this.classList.remove('text-gray-500');
                     this.classList.add('text-blue-600', 'border-b-2', 'border-blue-600');
                     
                     // éšè—æ‰€æœ‰å†…å®¹åŒºåŸŸ
                     trendContents.forEach(content => {
                         content.classList.add('hidden');
                     });
                     
                     // æ˜¾ç¤ºå¯¹åº”çš„å†…å®¹åŒºåŸŸ
                     const targetContent = document.getElementById(targetTab + 'Content');
                     if (targetContent) {
                         targetContent.classList.remove('hidden');
                     }
                 });
             });
             
             // æ–°å¢ä»»åŠ¡åŠŸèƒ½
             window.addNewTask = function() {
                 const modal = document.createElement('div');
                 modal.className = 'fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center';
                 modal.innerHTML = `
                     <div class="bg-white rounded-xl p-6 m-4 max-w-sm w-full">
                         <h3 class="text-lg font-semibold mb-4">æ–°å¢ä»»åŠ¡</h3>
                         <div class="space-y-4">
                             <div>
                                 <label class="block text-sm font-medium text-gray-700 mb-2">ä»»åŠ¡åç§°</label>
                                 <input type="text" id="taskName" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="è¯·è¾“å…¥ä»»åŠ¡åç§°">
                             </div>
                             <div>
                                 <label class="block text-sm font-medium text-gray-700 mb-2">é¢„è®¡å®Œæˆæ—¶é—´</label>
                                 <div class="space-y-2">
                                     <input type="date" id="taskDate" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                                     <input type="time" id="taskTime" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                                 </div>
                             </div>
                             <div>
                                 <label class="block text-sm font-medium text-gray-700 mb-2">ä¼˜å…ˆçº§</label>
                                 <select id="taskPriority" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                                     <option value="normal">æ™®é€š</option>
                                     <option value="high">é‡è¦</option>
                                     <option value="urgent">ç´§æ€¥</option>
                                 </select>
                             </div>
                         </div>
                         <div class="flex space-x-3 mt-6">
                             <button class="flex-1 py-2 px-4 bg-gray-200 rounded-lg" onclick="closeTaskModal()">å–æ¶ˆ</button>
                             <button class="flex-1 py-2 px-4 bg-blue-600 text-white rounded-lg" onclick="saveNewTask()">ä¿å­˜</button>
                         </div>
                     </div>
                 `;
                 document.body.appendChild(modal);
                 
                 window.saveNewTask = function() {
                     const taskName = document.getElementById('taskName').value.trim();
                     const taskDate = document.getElementById('taskDate').value;
                     const taskTime = document.getElementById('taskTime').value;
                     const taskPriority = document.getElementById('taskPriority').value;
                     
                     if (!taskName) {
                         alert('è¯·è¾“å…¥ä»»åŠ¡åç§°');
                         return;
                     }
                     
                     const taskContainer = document.querySelector('.px-4:last-child .space-y-3');
                     const newTask = document.createElement('div');
                     newTask.className = 'bg-white rounded-xl p-4';
                     
                     let priorityClass = 'text-gray-600 bg-gray-100';
                     let priorityText = 'å¾…å¼€å§‹';
                     
                     if (taskPriority === 'high') {
                         priorityClass = 'text-orange-600 bg-orange-100';
                         priorityText = 'é‡è¦';
                     } else if (taskPriority === 'urgent') {
                         priorityClass = 'text-red-600 bg-red-100';
                         priorityText = 'ç´§æ€¥';
                     }
                     
                     // æ ¼å¼åŒ–æ—¥æœŸæ—¶é—´æ˜¾ç¤º
                     let timeDisplay = 'å¾…è®¾å®š';
                     if (taskDate || taskTime) {
                         let dateStr = '';
                         let timeStr = '';
                         
                         if (taskDate) {
                             const date = new Date(taskDate);
                             const month = date.getMonth() + 1;
                             const day = date.getDate();
                             dateStr = `${month}æœˆ${day}æ—¥`;
                         }
                         
                         if (taskTime) {
                             timeStr = taskTime;
                         }
                         
                         if (dateStr && timeStr) {
                             timeDisplay = `${dateStr} ${timeStr}`;
                         } else if (dateStr) {
                             timeDisplay = dateStr;
                         } else if (timeStr) {
                             timeDisplay = timeStr;
                         }
                     }
                     
                     newTask.innerHTML = `
                         <div class="flex items-center justify-between mb-2">
                             <div class="flex items-center space-x-3">
                                 <input type="checkbox" class="w-4 h-4 text-blue-600 rounded">
                                 <span class="text-sm font-medium text-gray-800">${taskName}</span>
                             </div>
                             <span class="text-xs ${priorityClass} px-2 py-1 rounded-full">${priorityText}</span>
                         </div>
                         <p class="text-xs text-gray-500 ml-7">é¢„è®¡å®Œæˆæ—¶é—´: ${timeDisplay}</p>
                     `;
                     
                     // æ·»åŠ åˆ°å¾…å¼€å§‹ä»»åŠ¡ä¹‹å‰ï¼ˆå·²å®Œæˆä»»åŠ¡ä¹‹å‰ï¼‰
                     const completedTasks = taskContainer.querySelectorAll('input[type="checkbox"]:checked');
                     if (completedTasks.length > 0) {
                         const lastCompletedTask = completedTasks[completedTasks.length - 1].closest('.bg-white');
                         taskContainer.insertBefore(newTask, lastCompletedTask);
                     } else {
                         taskContainer.appendChild(newTask);
                     }
                     
                     // ä¸ºæ–°ä»»åŠ¡æ·»åŠ å¤é€‰æ¡†äº‹ä»¶ç›‘å¬
                     const newCheckbox = newTask.querySelector('input[type="checkbox"]');
                     newCheckbox.addEventListener('change', function() {
                         const taskItem = this.closest('.flex');
                         const taskText = taskItem.querySelector('.text-sm');
                         const statusBadge = taskItem.querySelector('span:last-child');
                         
                         if (this.checked) {
                             taskItem.classList.add('opacity-60');
                             taskText.classList.add('line-through');
                             statusBadge.textContent = 'å·²å®Œæˆ';
                             statusBadge.className = 'text-xs text-green-600 bg-green-100 px-2 py-1 rounded-full';
                         } else {
                             taskItem.classList.remove('opacity-60');
                             taskText.classList.remove('line-through');
                             statusBadge.textContent = priorityText;
                             statusBadge.className = `text-xs ${priorityClass} px-2 py-1 rounded-full`;
                         }
                     });
                     
                     closeTaskModal();
                     
                     // æ˜¾ç¤ºæˆåŠŸæç¤º
                     const toast = document.createElement('div');
                     toast.className = 'fixed top-4 left-1/2 transform -translate-x-1/2 bg-green-500 text-white px-4 py-2 rounded-lg z-50';
                     toast.textContent = 'ä»»åŠ¡æ·»åŠ æˆåŠŸï¼';
                     document.body.appendChild(toast);
                     setTimeout(() => {
                         document.body.removeChild(toast);
                     }, 2000);
                 };
                 
                 window.closeTaskModal = function() {
                     document.body.removeChild(modal);
                 };
             };
        });
    </script>
</body>
</html>
